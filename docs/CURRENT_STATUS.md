# üöÄ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ –¢–û–¢ MVP

## üìä –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**–¢–û–¢ - –¢–≤–æ—è –¢–æ—á–∫–∞ –û–ø–æ—Ä—ã** - —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ –≤—Ä–∞—á–µ–π –Ω–∞ –¥–æ–º —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º.

### ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|--------|----------|
| **API Gateway** | 8000 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö API |
| **User Service** | 8001 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è |
| **Profile Service** | 8002 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä–æ—Ñ–∏–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤, –≤—Ä–∞—á–µ–π –∏ –∫–ª–∏–Ω–∏–∫ |
| **Payment Service** | 8005 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ –ÆKassa –∏ –°–ë–ü |

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ SQLite**: –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç SQLite –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è**: `DATABASE_URL=sqlite:///./tot_mvp.db`
- **–§–∞–π–ª –ë–î**: `tot_mvp.db` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- **–ÆKassa**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º –ø–ª–∞—Ç–µ–∂–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º
- **–°–ë–ü**: –°–∏—Å—Ç–µ–º–∞ –ë—ã—Å—Ç—Ä—ã—Ö –ü–ª–∞—Ç–µ–∂–µ–π —Å QR-–∫–æ–¥–∞–º–∏
- **–ö–æ—à–µ–ª–µ–∫**: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏—Å—Ç–µ–º–∞ –±–∞–ª–∞–Ω—Å–æ–≤

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ
- **Payment Service**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–ª–æ–≤–æ–º `metadata` ‚Üí `payment_metadata`
- **SQLAlchemy**: –î–æ–±–∞–≤–ª–µ–Ω—ã `pyright: ignore` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **CORS**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### API Gateway (–ø–æ—Ä—Ç 8000)
- **Swagger UI**: http://localhost:8000/docs
- **Health Check**: http://localhost:8000/health
- **OpenAPI**: http://localhost:8000/openapi.json

### User Service (–ø–æ—Ä—Ç 8001)
- **Health Check**: http://localhost:8001/health
- **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**: POST /users/register
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: POST /users/login
- **–ü—Ä–æ—Ñ–∏–ª—å**: GET /users/{user_id}

### Profile Service (–ø–æ—Ä—Ç 8002)
- **Health Check**: http://localhost:8002/health
- **–ü—Ä–æ—Ñ–∏–ª–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤**: /profiles/
- **–ü—Ä–æ—Ñ–∏–ª–∏ –≤—Ä–∞—á–µ–π**: /doctor-profiles/
- **–ü—Ä–æ—Ñ–∏–ª–∏ –∫–ª–∏–Ω–∏–∫**: /clinic-profiles/

### Payment Service (–ø–æ—Ä—Ç 8005)
- **Health Check**: http://localhost:8005/health
- **–ü–ª–∞—Ç–µ–∂–∏**: /payments/
- **–ö–æ—à–µ–ª—å–∫–∏**: /wallets/
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: /transactions/

## üí≥ –ü–ª–∞—Ç–µ–∂–Ω—ã–µ –º–µ—Ç–æ–¥—ã

### 1. –ÆKassa
```json
{
  "user_id": 1,
  "amount": 1500.0,
  "payment_method": "yookassa",
  "description": "–í—ã–∑–æ–≤ –≤—Ä–∞—á–∞ –Ω–∞ –¥–æ–º"
}
```

### 2. –°–ë–ü (QR-–∫–æ–¥)
```json
{
  "user_id": 1,
  "amount": 1500.0,
  "payment_method": "sbp",
  "description": "–í—ã–∑–æ–≤ –≤—Ä–∞—á–∞ –Ω–∞ –¥–æ–º"
}
```

### 3. –ö–æ—à–µ–ª–µ–∫
```json
{
  "user_id": 1,
  "amount": 1500.0,
  "payment_method": "wallet",
  "description": "–í—ã–∑–æ–≤ –≤—Ä–∞—á–∞ –Ω–∞ –¥–æ–º"
}
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫
```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
$env:DATABASE_URL="sqlite:///./tot_mvp.db"

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
python backend/api-gateway/main.py &
python backend/user-service/main.py &
python backend/profile-service/main.py &
python backend/payment-service/main.py &
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```powershell
curl http://localhost:8000/health
curl http://localhost:8001/health
curl http://localhost:8002/health
curl http://localhost:8005/health
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
- `fastapi==0.104.1` - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `uvicorn[standard]==0.24.0` - ASGI —Å–µ—Ä–≤–µ—Ä
- `sqlalchemy==2.0.23` - ORM
- `pydantic==2.5.0` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- `yookassa==3.6.0` - –ÆKassa SDK
- `qrcode==8.2` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤
- `cryptography==45.0.5` - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
- `redis==5.0.1` - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- `httpx==0.25.2` - HTTP –∫–ª–∏–µ–Ω—Ç
- `PyJWT==2.8.0` - JWT —Ç–æ–∫–µ–Ω—ã

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite:///./tot_mvp.db

# –ÆKassa
YUKASSA_SHOP_ID=your_shop_id
YUKASSA_SECRET_KEY=your_secret_key

# –°–ë–ü
SBP_MERCHANT_ID=your_merchant_id
SBP_PRIVATE_KEY_PATH=/path/to/private.key
```

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Booking Service
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Notification Service
- [ ] –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Chat Service
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Geo Service

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [ ] Integration —Ç–µ—Å—Ç—ã
- [ ] E2E —Ç–µ—Å—Ç—ã

### 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [ ] CI/CD pipeline
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] JWT —Ç–æ–∫–µ–Ω—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [ ] HTTPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- [ ] Rate limiting
- [ ] Input validation

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **WSL2**: –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∫—Å–∏ –≤ Ubuntu WSL
2. **PostgreSQL**: –¢—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
3. **Docker**: –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Ç–µ–∫—É—â–µ–π —Å—Ä–µ–¥–µ
4. **Frontend**: –ü–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–±–ª–µ–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- `README.md` - –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- `docs/ARCHITECTURE.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã
- `docs/DEPLOYMENT.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- `docs/MULTIPLATFORM.md` - –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 31 –∏—é–ª—è 2025
**–í–µ—Ä—Å–∏—è**: 1.0.0
**–°—Ç–∞—Ç—É—Å**: MVP - –†–∞–±–æ—Ç–∞—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã 